<html>
<head>
    <title>Терминал TradeSharp - Тестирование роботов</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
</head>

<body>
    <img src="picts\main_logo.png" />
    <h1>Тестирование торговых роботов</h1>
    <p>
        Для тестирования торговых роботов выберите команду меню Торговля | Роботы | Тестер роботов.
    </p>     

    <img alt="Окно тестирования" src="picts\robot\backtest\window_test.png" />
    <p class="pictitle">Рис. 1 Окно тестирования</p>

    <p>
        В правой части окна, в таблице, перечислены торговые роботы, формирующие "портфель".
        Добавить / исключить робота из "портфеля" можно, нажав на кнопку с изображением
        зеленой стрелки. Либо <b>"перетащить"</b> название робота из списка в таблицу<br />
        В списке слева от таблицы перечислены все торговые роботы: те, что изначально присутствуют в терминале и те, 
        что загружены из библиотек в каталоге <b>plugin</b> терминала при старте.
    </p>
    <p>
        При добавлении робота в "портфель" роботу назначается идентификационный номер - <b>Magic</b>. 
        Если иная логика не реализована в торговом роботе, этот номер служит
        для того, чтобы отличать сделки, открытые тем или иным роботом. Номер назначается автоматически, но может быть изменен
        вручную.
    </p>
    <p>
        В следующем поле - "Графики" - перечислены параметры типа <i>ТОРГУЕМЫЙ АКТИВ:ТАЙМФРЕЙМ</i>. Например, для робота, торгующего
        по пересечению двух скользящих средних, можно указать <b>GBPUSD:H4</b>. В общем случае, можно указать более одной пары 
        <i>актив:таймфрейм</i>.
    </p>

    <h3>Параметр "Графики"</h3>
    <p>
        Для торгового робота нужно указать хотя бы одну пару <i>актив:таймфрейм</i>. Робот будет "включаться в работу" каждый раз,
        когда обновится соответствующая котировка. В тестовом контексте это означает, что модельное время робота будет дискретно,
        с приращениями, равными интервалам между котировками одного или нескольких торгуемых инструментов. <br />
    </p>
    <p>
        Торговый робот может торговать более, чем одним инструментом. Робот может торговать по одному алгоритму, одновременно
        используя свечи нескольких таймфреймов (H1, D1...). Наконец, робот может торговать одним инструментом, но ориентироваться
        на котировки других активов. 
    </p>
    <p>
        К примеру, торговая стратегия основана на поисках дивергенций валютного курса и 
        <a href="pg_user_index.htm#editor">валютного индекса</a> вида
    </p>
    <p class="excerpt">
      34.38805726*close^0.3155*eurgbp^0.3056*eurjpy^0.1891*eurchf^0.1113
    </p>    <p>
        В таком случае торговый робот может самостоятельно определить, какие котировки требуются для его функционирования.
        Трейдеру достаточно указать торгуемую валютную пару. Остальные котировки робот запросит самостоятельно.
    </p>
    <h3>Запуск тестирования</h3>
    <p>
        После того, как "портфель" роботов сформирован, обратите внимание на следующие настройки:
    </p>

    <ul>
        <li><b>Использовать дату тестирования</b> - если параметр не задан, робот будет протестирован 
            на интервале времени, соответствующему продолжительности хранимой клиентом истории котировок, указанных для робота.</li>
        <li><b>Сохранять лог</b> - если параметр включен, робот может оставлять специальные комментарии, в том числе - отметки
            на графике (графиках). Отключение параметра позволит незначительно ускорить проведение бэктеста.</li>
        <li><b>Настройки счета</b> - настройки тестового счета. Можно указать размер виртуального депозита, ограничение по плечу.</li>
        <li><b>Настройки тестовой группы</b> - настройки тестового счета, такие, как плечо брокера, уровень стоп-аута.</li>
    </ul>

    <p>
        Настройку счета / группы можно не производить. В этом случае размер виртуального депозита для тестирования будет равен текущему
        балансу <b>торгового счета пользователя терминала</b>. Маржинальные требования также будут определяться настройками брокера.
    </p>
    <p>
        Настройки тестового портфеля можно сохранить / загрузить из файла. Тестовый портфель, сохраненный в файл, можно прочитать в окне 
        настроек торговли в реальном времени.<br />
        После нажания на кнопку <b>"Пуск"</b> откроется окно актуализации (скачивания с сервера Trade#) котировок. По завершению актуализации
        внизу окна тестирования будет заполняться индикатор прогресса.
    </p>

    <h3>Результаты тестирования</h3>
    <p>
        Нажмите на кнопку <b>"Результаты тестирования"</b>. Откроется окно, содержащее 5 вкладок:
    </p>

    <ul>
        <li><i>История операций:</i> сделки, совершенные роботом (роботами) в процессе тестирования. Открытые сделки выделены жирным шрифтом. Таблицу можно отсортировать
            по любой из колонок. Нажатием правой кнопки можно вызвать контекстное меню с опцией сохранения таблицы сделок в <b>файл</b> файл формата
            CSV (открывается программой Microsoft Excel).
        </li>
        <li><i>График equity:</i> кривая баланса тестируемого счета, в каждой точке учитывающая результат открытых на данный момент позиций.
            Под графиком - полоска навигации (масштабирования и прокрутки "верхнего" графика).
        </li>
        <li><i>Стат. показатели:</i> статистика теста и результаты эффективности автоматического управления счетом.</li>
        <li><i>Лог:</i> если выбрана опция <b>сохранять лог</b>, в процессе теста сохраняются текстовые сообщения торговых роботов.
            Робот необязательно формирует текстовые сообщения, окно может быть пустым.
        </li>
    </ul>

    <h3>График сделок</h3>
    
    <p>
        Открывается нажатием на кнопку <b>График сделок</b>.
    </p>

    <img alt="График сделок" src="picts\robot\backtest\deal_points.png" />
    <p class="pictitle">Рис. 2 График сделок</p>

    <p>
        Цена деления временной шкалы - указанный интервал в минутах. По-умолчанию, равен 60 минутам.
        Задается в настройках, открываемых нажатием кнопки <b>Еще...</b>. Каждая кривая показывает <b>средний</b>
        результат сделки, в <b>ценовых пунктах</b>, на N-й интервал времени <b>с момента входа в рынок</b>. <br />
        Зеленая кривая - средний результат прибыльных сделок, красная кривая - средний результат убыточных сделок, 
        темная кривая - средний результат по всем сделкам.<br />
        Результат сделки считается с момента входа вплоть до  N-го интервала (на рисунке N = 200). Т.е.
        момент выхода из рынка <b>не учитывается</b>.
    </p>

    <h3>Показать на графике</h3>
    <p>
        Отметки о входе / выходе из рынка, вместе со специфическими отметками, определенными алгоритмом
        торгового робота, можно показать на графике / графиках торгуемых активов. По нажатию на кнопку
        "Показать на графике" откроется окно. В окне нужно указать, результаты работы какого робота
        соответствуют какому графику. <br />
        Например, если открыт график USDCAD H4 (четырехчасовой), на
        нем можно отобразить результаты торговли робота, торгующего USDCAD на интервале D1 (дневной).
    </p>
    
    <img alt="Сделки на графике" src="picts\robot\backtest\robot_on_chart.png" />
    <p class="pictitle">Рис. 3 Отображение сделок роботов на графиках</p>

    <p>
        На графике появятся отметки: стрелки, направленные вверх (покупка) и вниз (продажа) с буквой <b>e</b>.
        Квадратные отметки с буквой <b>q</b> обозначают закрытие сделки. Более подробную информацию по каждой сделке
        (отметке на графике) можно получить, нажав на ней правой кнопкой мыши.        
    </p>
</body>
</html>